<!-- 
****************************************************************************************************************                           

* File Name                         :  SessionTimeoutRedirect.html                                               			   *
* Version No                        :  1.0                                                                     *
* Project Code                      :  HSG032B                                                                 *
* Project Name                      :  Mobile Telemedicine System for Wayanad                                  *
* Product Name                      :  e-Dhanwanthari Comprehensive EMR and Telemedicine Software              *
* Module Name                       :  Session Time out  						   						   *                       
* Purpose                           :  html of Session Time out                                           			   *
* Author                            :  Jeni George  , C S Mani                                                           *
* Revision History & Date of
* modifications of baseline
* versions                          :  22/05/2019                                                              *                                       
* Modified by whom and Reasons for
* modifications                     :                                                                          *   

****************************************************************************************************************

 -->
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
  <link rel="icon" href="../../scripts/assets/images/favicon.ico" type="image/x-icon">
    <!-- Google font-->
   <!--  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="../../scripts/css/google_font.css">
    <!-- Material Icon -->
    <link rel="stylesheet" type="text/css" href="../../scripts/assets/icon/material-design/css/material-design-iconic-font.min.css">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="../../scripts/bower_components/bootstrap/css/bootstrap.min.css">
    <!-- themify-icons line icon -->
    <link rel="stylesheet" type="text/css" href="../../scripts/assets/icon/themify-icons/themify-icons.css">
    <!-- ico font -->
    <link rel="stylesheet" type="text/css" href="../../scripts/assets/icon/icofont/css/icofont.css">
    <!-- flag icon framework css -->
    <link rel="stylesheet" type="text/css" href="../../scripts/assets/pages/flag-icon/flag-icon.min.css">
    <!-- Menu-Search css -->
    <link rel="stylesheet" type="text/css" href="../../scripts/assets/pages/menu-search/css/component.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="../../scripts/assets/css/style.css">
    <!--color css-->
	<link rel="stylesheet" type="text/css" href="../../scripts/assets/css/linearicons.css" >
	<link rel="stylesheet" type="text/css" href="../../scripts/assets/css/simple-line-icons.css">
	<link rel="stylesheet" type="text/css" href="../../scripts/assets/css/ionicons.css">
	<link rel="stylesheet" type="text/css" href="../../scripts/assets/css/jquery.mCustomScrollbar.css">

<title>Initiating Log-out on session timeout by redirecting</title>
</head>
<body>

</body>
    
    <script type="text/javascript" src="../../scripts/bower_components/jquery/js/jquery.min.js"></script>  
    <script type="text/javascript" src="../../scripts/bower_components/jquery-ui/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../scripts/bower_components/popper.js/js/popper.min.js"></script>
    <script type="text/javascript" src="../../scripts/bower_components/bootstrap/js/bootstrap.min.js"></script>


  
<script type="text/javascript">
 $( document ).ready(function() {
	
    console.log( "ready!" );



/* var logout = function()
{
	 var a= confirm("Do you want to Logout?");
     
	  	if(a)
           {
			  var pdata={}
			  var params = {};
			  params['createsess'] = 'invalidate';
			  pdata['data']= JSON.stringify(params);
			 // alert("pdata"+pdata);
			  utils.postData('../../Rest/loginservice/logout',pdata,null,sessionInvalidateSuccess,sessionErr);
           }
}
function sessionInvalidateSuccess(result)
{
	
	if(result['status'] == 'Success')
	{
		alert('Successfully Logged-out !!!');
		window.location.href = '../../';
		
	}
	
}
function sessionErr(xhr, status, error)
{
	alert('Error! ' + error);
} */

var pdata={}
var params = {};
params['createsess'] = 'invalidate';
pdata['data']= JSON.stringify(params);
				$.ajax({
					type: 'POST',
					contentType:'application/json',
					url: '../../Rest/loginservice/logout?'+$.param(pdata),
				    data:pdata,
				    success: function(dataVal)
				    {
				    	var data=dataVal;//JSON.parse(dataVal);
				         if (data['status'] == 'Success') {
				        	 alert('Your session expired !!! Please Login Again.');     
				        	 window.location.href = '../../';
				         }
				         else {
				         	//console.log(JSON.stringify(data));
				         	//alert('Error in logout !!!');
				        	 window.location.href = '../../';
				        }
				    },
				    error: function(xhr,status,error)
					  {
						 alert('Error Occured! '+error.message);
					  }
				});
	  		
 }); 
</script>
</html>